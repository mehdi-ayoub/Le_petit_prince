<!-- app/views/planets/index.html.erb -->

<div style="width: 100%; height: 500px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
</div>


<div class="container">
  <h1>All Planets</h1>
  <h4><%= link_to "Add new planet", new_planet_path, class: "btn btn-primary"%></h4>
  <div class="row">
    <% @planets.each do |planet| %>
      <div class="col-md-4 mb-4">
        <div class="card" style="width: 18rem;">
          <img src="<%= planet.image_url %>" class="card-img-top" alt="<%= planet.title %> Image">
          <div class="card-body">
            <h5 class="card-title"><%= planet.title %></h5>
            <p class="card-text"><%= planet.spaceport %></p>
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">Renting Price: $<%= planet.renting_price %></li>
            <li class="list-group-item">Owner: <%= planet.user.name %></li>
          </ul>
          <div class="card-body d-flex p-2">
            <%= link_to "Show planet", planet, class:"btn btn-success"%>
            <%= link_to "Edit Planet", edit_planet_path(planet), class:"btn btn-primary"%>
            <%= link_to "Destroy Planet", planet_path(planet), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "btn btn-danger" %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
